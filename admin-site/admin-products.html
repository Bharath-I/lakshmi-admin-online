<!DOCTYPE html>
<html>

<head>
    <title>Admin - Manage Products</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th,
        td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }
        
        .btn {
            padding: 5px 10px;
            margin: 2px;
            cursor: pointer;
        }
        
        .add-form input {
            margin: 5px;
        }
    </style>
</head>

<body>
    <h2>Admin Panel - Product Stock Management</h2>
    <script type="module"> import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js"; import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-analytics.js";const firebaseConfig = { apiKey: "AIzaSyCQlVTLJ0bQJSfZhXixcdMP_MmSLtHmchc",
        authDomain: "lakshmi-chidambaram-gold.firebaseapp.com", projectId: "lakshmi-chidambaram-gold", storageBucket: "lakshmi-chidambaram-gold.firebasestorage.app", messagingSenderId: "558117872149", appId: "1:558117872149:web:49270f29141b5bd7f0e41c",
        measurementId: "G-2832JXWHQG" }; const app = initializeApp(firebaseConfig); const analytics = getAnalytics(app);
    </script>

    <div class="add-form">
        <h3>Add New Product</h3>
        <input type="text" id="productName" placeholder="Product Name" /><br>
        <input type="text" id="productDetails" placeholder="Product Details" /><br>
        <input type="number" id="productPrice" placeholder="Price ₹" /><br>
        <input type="number" id="productStock" placeholder="Stock Count" /><br>
        <input type="file" id="productImage" accept="image/*" /><br>
        <button class="btn" onclick="addProduct()">Add Product</button>
    </div>

    <h3>Product List</h3>
    <table>
        <thead>
            <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Details</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="productTable"></tbody>
    </table>

    <script>
        let products = JSON.parse(localStorage.getItem("products")) || [];

        function saveProducts() {
            localStorage.setItem("products", JSON.stringify(products));
            displayProducts();
        }

        function displayProducts() {
            const table = document.getElementById("productTable");
            table.innerHTML = "";

            products.forEach((product, index) => {
                table.innerHTML += `
          <tr>
            <td><img src="${product.image}" width="60"></td>
            <td>${product.name}</td>
            <td>${product.details}</td>
            <td>₹${product.price}</td>
            <td>${product.stock > 0 ? product.stock : '<span style="color:red">Out of Stock</span>'}</td>
            <td>
              <input type="number" id="stock-${index}" value="${product.stock}" min="0" style="width:60px">
              <button class="btn" onclick="updateStock(${index})">Update</button>
              <button class="btn" onclick="removeProduct(${index})">Remove</button>
            </td>
          </tr>
        `;

            });
        }

        function addProduct() {
            const name = document.getElementById("productName").value;
            const details = document.getElementById("productDetails").value;
            const price = parseFloat(document.getElementById("productPrice").value);
            const stock = parseInt(document.getElementById("productStock").value);
            const imageInput = document.getElementById("productImage");

            if (!imageInput.files[0]) {
                alert("Please upload a product image.");
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const newProduct = {
                    id: Date.now(),
                    name,
                    details,
                    price,
                    stock,
                    image: e.target.result,
                    approved: true
                };
                products.push(newProduct);
                saveProducts();

                // Clear form
                document.getElementById("productName").value = "";
                document.getElementById("productDetails").value = "";
                document.getElementById("productPrice").value = "";
                document.getElementById("productStock").value = "";
                document.getElementById("productImage").value = "";
            };

            reader.readAsDataURL(imageInput.files[0]);
        }

        function updateStock(index) {
            const newStock = parseInt(document.getElementById(`stock-${index}`).value);
            products[index].stock = newStock;
            saveProducts();
        }

        function removeProduct(index) {
            if (confirm("Are you sure to delete this product?")) {
                products.splice(index, 1);
                saveProducts();
            }
        }

        window.onload = displayProducts;
    </script>


</body>

</html>